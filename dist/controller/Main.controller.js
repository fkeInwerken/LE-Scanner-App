sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel"],function(e,n){"use strict";return e.extend("inw.le_scanner.controller.Main",{onInit:function(){const e=new n({istLagereinheitBarcode:"",istLagerplatzBarcode:"",sollLagereinheitBarcode:"",TANummer:"",anzahlPositionen:"",appVersion:this.getOwnerComponent().getManifestEntry("sap.app").applicationVersion.version});this.setModel(e,"viewModel");const t=this.byId("istLagereinheitBarcode");const o=this.byId("istLagerplatzBarcode");const s=this.byId("sollLagereinheitBarcode");const i=[t,o,s];i.forEach(e=>{e.addEventDelegate({onfocusin:this.onFocus.bind(this)})});this.aInputs=[t,o,s];this.aInputs.forEach((e,n)=>{e.attachLiveChange(()=>this._handleInputChange(n))});i.forEach(e=>{e.addEventDelegate({onAfterRendering:function(){const n=e.getDomRef("inner");if(n){}}})});document.addEventListener("keydown",this.onKeyDown.bind(this))},onKeyDown:function(e){const n=/^(?:[\x00-\x7F]|([0-9]{2}))*$/;const t=document.activeElement.id;const o=t.replace(/-inner$/,"");const s=e.key;if(n.test(s)){const e=this.byId(o);e.setValue(e.getValue()+s)}const i=this._getFocusedInputIndex();switch(s){case"DPAD_UP":this.onArrowUp(i);break;case"ArrowUp":this.onArrowUp(i);break;case"DPAD_DOWN":if(i===-1){this.aInputs[0].focus();return}this.onArrowDown(i);break;case"ArrowDown":if(i===-1){this.aInputs[0].focus();return}this.onArrowDown(i);break;case"DPAD_LEFT":this.onArrowLeft();break;case"DPAD_RIGHT":this.onArrowRight();break;case"ENTER":case"\r":case"\n":this.onEnter();break;case"TRIGGER":this.onTrigger();break;case"P1":this.onP1();break;case"P2":this.onP2();break;default:}},onArrowUp:function(e){if(e>0){const n=this.aInputs[e-1];n.focus();this._selectInputText(n)}},onArrowDown:function(e){if(e<this.aInputs.length-1){const n=this.aInputs[e+1];n.focus();this._selectInputText(n)}},onEnter:function(){const e=this.byId("buchenButton");if(e){e.firePress()}},onFocus:function(e){const n=e.srcControl;const t=n.getDomRef("inner");if(t){t.select()}},onKeyboardAction:function(e){const n=e.getSource();const t=n.getDomRef("inner");if(t){n.focus()}},onBuchenPress:function(){sap.m.MessageToast.show("Erfolgreich gebucht!",{width:"15em",my:"center center",at:"center center"})},_getFocusedInputIndex:function(){const e=document.activeElement.id;const n=e.replace(/-inner$/,"");return this.aInputs.findIndex(e=>e.getId()===n)},_selectInputText:function(e){setTimeout(()=>{const n=e.getDomRef("inner");if(n){n.setSelectionRange(0,n.value.length)}},0)},_handleInputChange:function(e){const n=this.aInputs[e];if(n.getValue()){const n=this.aInputs[e+1];if(n){n.focus()}}}})});
//# sourceMappingURL=Main.controller.js.map